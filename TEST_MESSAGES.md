# üß™ –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π

## ‚ö†Ô∏è –ö–†–ò–¢–ò–ß–ï–°–ö–ò –í–ê–ñ–ù–û

**–û—Ç–ø—Ä–∞–≤–ª—è–π—Ç–µ –¢–û–õ–¨–ö–û –ü–†–ò–í–ê–¢–ù–´–ï —Å–æ–æ–±—â–µ–Ω–∏—è!**

–û–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–ª—É—à–∞–µ—Ç —Ç–æ–ª—å–∫–æ –ø—Ä–∏–≤–∞—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è:
```python
@client.on(events.NewMessage(incoming=True, func=lambda e: e.is_private))
```

- ‚úÖ **–ü–†–ê–í–ò–õ–¨–ù–û**: –û—Ç–∫—Ä–æ–π—Ç–µ –±–æ—Ç–∞ –≤ –ª–∏—á–Ω—ã—Ö —Å–æ–æ–±—â–µ–Ω–∏—è—Ö –∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ
- ‚ùå **–ù–ï–ü–†–ê–í–ò–õ–¨–ù–û**: –°–æ–æ–±—â–µ–Ω–∏–µ –≤ –≥—Ä—É–ø–ø–µ, –∫–∞–Ω–∞–ª–µ –∏–ª–∏ —á–∞—Ç–µ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ –ª—é–¥—å–º–∏

---

## üìù –®–∞–≥–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### 1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å –Ω–æ–≤—ã–º –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º

```bash
python run.py
```

**–ò—â–∏—Ç–µ —ç—Ç—É —Å—Ç—Ä–æ–∫—É –≤ –ª–æ–≥–∞—Ö:**
```
[INFO] app.services.conversation_service: Conversation event handlers registered - listening for private messages
```

–ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ - –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –∞–∫—Ç–∏–≤–µ–Ω ‚úÖ

---

### 2. –û—Ç–ø—Ä–∞–≤—å—Ç–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –±–æ—Ç—É

1. **–û—Ç–∫—Ä–æ–π—Ç–µ Telegram –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**
2. **–ù–∞–π–¥–∏—Ç–µ –∫–æ–Ω—Ç–∞–∫—Ç —Å –Ω–æ–º–µ—Ä–æ–º: +31645561204**
   - –≠—Ç–æ –Ω–æ–º–µ—Ä –∏–∑ .env —Ñ–∞–π–ª–∞ (`TELEGRAM_PHONE`)
   - –≠—Ç–æ –í–ê–® –∞–∫–∫–∞—É–Ω—Ç, –Ω–∞ –∫–æ—Ç–æ—Ä–æ–º –∑–∞–ø—É—â–µ–Ω –±–æ—Ç
3. **–û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–≤–∞—Ç–Ω—ã–π —á–∞—Ç**
4. **–û—Ç–ø—Ä–∞–≤—å—Ç–µ –ª—é–±–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ:**
   - "Hello"
   - "—Ç–µ—Å—Ç"  
   - "Hey there"
   - –ß—Ç–æ —É–≥–æ–¥–Ω–æ!

---

### 3. –°–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ –≤ –∫–æ–Ω—Å–æ–ª–∏ - –≤ —ç—Ç–æ–º –ø–æ—Ä—è–¥–∫–µ

#### **–®–∞–≥ 1: –°–æ–±—ã—Ç–∏–µ –ø–æ–ª—É—á–µ–Ω–æ**
```
[HANDLER] NEW MESSAGE EVENT TRIGGERED!
[HANDLER] Event class: NewMessage
[HANDLER] Is private: True
[HANDLER] Has text: True
```

**–ï—Å–ª–∏ –≤–∏–¥–∏—Ç–µ —ç—Ç–æ - —Å–æ–æ–±—â–µ–Ω–∏–µ –ü–û–õ–£–ß–ï–ù–û! ‚úÖ**

---

#### **–®–∞–≥ 2: –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–æ–±—â–µ–Ω–∏—è**
```
[MESSAGE] Incoming message event received
[MESSAGE] From user 123456789 (username123, John)
```

**–í–∏–¥–∏—Ç–µ —ç—Ç–æ - —Å–æ–æ–±—â–µ–Ω–∏–µ –û–ë–†–ê–ë–ê–¢–´–í–ê–ï–¢–°–Ø! ‚úÖ**

---

#### **–®–∞–≥ 3: OpenAI –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç –æ—Ç–≤–µ—Ç**
```
[INFO] httpx: HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
```

**–í–∏–¥–∏—Ç–µ —ç—Ç–æ - OpenAI —Å–æ–∑–¥–∞–µ—Ç –æ—Ç–≤–µ—Ç! ‚úÖ**

---

#### **–®–∞–≥ 4: –û—Ç–≤–µ—Ç –æ—Ç–ø—Ä–∞–≤–ª–µ–Ω**
```
[INFO] Sent response to 123456789
```

**–í–∏–¥–∏—Ç–µ —ç—Ç–æ - –ë–û–¢–û –û–¢–í–ï–¢–ò–õ! ‚úÖ‚úÖ‚úÖ**

---

### 4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –≤ Telegram

**–í –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ Telegram –¥–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è —Å–æ–æ–±—â–µ–Ω–∏–µ –æ—Ç –±–æ—Ç–∞ —Å –æ—Ç–≤–µ—Ç–æ–º!**

–ù–∞–ø—Ä–∏–º–µ—Ä –µ—Å–ª–∏ –≤—ã –Ω–∞–ø–∏—Å–∞–ª–∏ "Hello", –±–æ—Ç –æ—Ç–≤–µ—Ç–∏—Ç —á—Ç–æ-—Ç–æ —Ç–∏–ø–∞:
```
Hello! I'm an AI assistant here to help you...
```

---

## üî¥ –ï—Å–ª–∏ —Å–æ–æ–±—â–µ–Ω–∏—è –Ω–µ –ø—Ä–∏—Ö–æ–¥—è—Ç

### –í–∞—Ä–∏–∞–Ω—Ç A: –û–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç

**–õ–æ–≥–∏ –ø—É—Å—Ç—ã** - –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ –Ω–µ –≤–∏–¥–∏—Ç —Å–æ–æ–±—â–µ–Ω–∏–µ

**–í–æ–∑–º–æ–∂–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**
1. ‚úã **–í—ã –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç–µ –≤ –≥—Ä—É–ø–ø—É, –∞ –Ω–µ –ø—Ä–∏–≤–∞—Ç–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ**
   - –¢–æ–ª—å–∫–æ –ø—Ä–∏–≤–∞—Ç–Ω—ã–µ —Å–æ–æ–±—â–µ–Ω–∏—è –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è!
   
2. ‚õî **–ë–æ—Ç–∞ –∑–∞–±–ª–æ–∫–∏—Ä–æ–≤–∞–ª–∏ –∏–ª–∏ —É–¥–∞–ª–∏–ª–∏ –∏–∑ –∫–æ–Ω—Ç–∞–∫—Ç–æ–≤**
   - Telethon –Ω–µ –º–æ–∂–µ—Ç –ø–æ–ª—É—á–∏—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è

3. üì± **–°–µ—Å—Å–∏—è –Ω–∞ —ç—Ç–æ–º –Ω–æ–º–µ—Ä–µ –∑–∞–∫–æ–Ω—á–∏–ª–∞—Å—å**
   - –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ –≤ Telegram –Ω–∞ –Ω–æ–º–µ—Ä–µ +31645561204 –≤—ã –≤ —Å–µ—Ç–∏

### –í–∞—Ä–∏–∞–Ω—Ç B: –ï—Å—Ç—å –æ—à–∏–±–∫–∞ –ø—Ä–∏ –æ–±—Ä–∞–±–æ—Ç–∫–µ

**–í–∏–¥–∏—Ç–µ –ª–æ–≥–∏ [HANDLER] –Ω–æ –ø–æ—Ç–æ–º ERROR**

**–û—Ç–ø—Ä–∞–≤—å—Ç–µ —ç—Ç—É –æ—à–∏–±–∫—É!** –û–Ω–∞ –ø–æ–¥—Å–∫–∞–∂–µ—Ç —á—Ç–æ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç.

---

## üéØ –ß—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–µ—Ä–µ–¥ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ–º

### –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ:

1. **–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∑–∞–ø—É—â–µ–Ω–æ:**
   ```bash
   python run.py
   ```

2. **–í –ª–æ–≥–∞—Ö –≤–∏–¥–Ω—ã –≤—Å–µ 4 —Å–µ—Ä–≤–∏—Å–∞:**
   ```
   [INFO] telethon_runner: Event handlers registered.
   [INFO] app.services.conversation_service: Conversation event handlers registered
   [INFO] app.services.discovery_service: [START] Discovery service starting infinite loop
   [INFO] app.services.audience_service: Audience service starting infinite loop
   [INFO] app.services.publisher_service: [PUBLISHER] Starting infinite publishing loop
   [INFO] app.services.invitation_service: [INVITATIONS] Starting infinite invitation loop
   ```

3. **–¢–µ–ª–µ–≥—Ä–∞–º –∫–ª–∏–µ–Ω—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω:**
   ```
   [INFO] telethon_runner: Telegram client already authorized.
   [INFO] telethon_runner: Started 4 background tasks. Running...
   ```

4. **.env —Ñ–∞–π–ª –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –Ω–æ–º–µ—Ä:**
   - –í —Ñ–∞–π–ª–µ `.env`:
   ```
   TELEGRAM_PHONE=+31645561204
   ```

---

## üìä –û–∂–∏–¥–∞–µ–º–∞—è –ø–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ª–æ–≥–æ–≤

```
[TIME] [HANDLER] NEW MESSAGE EVENT TRIGGERED!
[TIME] [HANDLER] Event class: NewMessage
[TIME] [HANDLER] Is private: True
[TIME] [HANDLER] Has text: True
[TIME] [MESSAGE] Incoming message event received
[TIME] [MESSAGE] From user 123456789 (myusername, My Name)
[TIME] Received text from 123456789: Hello
[TIME] httpx: HTTP Request: POST https://api.openai.com/v1/chat/completions "HTTP/1.1 200 OK"
[TIME] Sent response to 123456789
```

---

## ‚ùì –ß–∞—Å—Ç–æ –∑–∞–¥–∞–≤–∞–µ–º—ã–µ –≤–æ–ø—Ä–æ—Å—ã

**Q: –ù—É–∂–Ω–æ –ª–∏ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å —Ñ–æ–Ω–æ–≤—ã–µ —Å–µ—Ä–≤–∏—Å—ã –ø—Ä–∏ —Ç–µ—Å—Ç–µ?**
A: –ù–ï–¢! –û–Ω–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ, –Ω–µ –º–µ—à–∞—é—Ç –æ–±—Ä–∞–±–æ—Ç—á–∏–∫—É —Å–æ–æ–±—â–µ–Ω–∏–π.

**Q: –ü–æ—á–µ–º—É –≤ –≤–∞—à–∏—Ö –ª–æ–≥–∞—Ö 62 –∑–∞–ø—Ä–æ—Å–∞ –∫ OpenAI?**
A: –≠—Ç–æ –Ω–µ —Å–æ–æ–±—â–µ–Ω–∏—è - —ç—Ç–æ —Ä–∞—Å—Å—ã–ª–∫–∞. Discovery/Invitation —Å–µ—Ä–≤–∏—Å—ã –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç –∫–æ–Ω—Ç–∞–∫—Ç—ã.

**Q: –ú–æ–∂–µ—Ç –ª–∏ –±—ã—Ç—å –ø—Ä–æ–±–ª–µ–º–∞ —Å SSL?**
A: –ú–æ–∂–µ—Ç, –Ω–æ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ —Å–æ–æ–±—â–µ–Ω–∏–π –Ω–µ –∑–∞–≤–∏—Å–∏—Ç –æ—Ç SSL - —ç—Ç–æ –ª–æ–∫–∞–ª—å–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏.

**Q: –ù—É–∂–Ω–æ –ª–∏ –¥–≤–∞ –Ω–æ–º–µ—Ä–∞?**
A: **–ù–ï–¢!** –û–¥–∏–Ω –Ω–æ–º–µ—Ä –º–æ–∂–µ—Ç –¥–µ–ª–∞—Ç—å –í–°–ï –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –±–ª–∞–≥–æ–¥–∞—Ä—è async/await.

---

## üöÄ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ** (—É–±–∏–≤–∞–π—Ç–µ —Å—Ç–∞—Ä—ã–π –ø—Ä–æ—Ü–µ—Å—Å):
   ```bash
   # Ctrl+C –≤ –∫–æ–Ω—Å–æ–ª–∏ –≥–¥–µ –∑–∞–ø—É—â–µ–Ω run.py
   ```

2. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ –∑–∞–Ω–æ–≤–æ —Å –Ω–æ–≤—ã–º –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ–º:**
   ```bash
   python run.py
   ```

3. **–û—Ç–ø—Ä–∞–≤—å—Ç–µ –ü–†–ò–í–ê–¢–ù–û–ï —Å–æ–æ–±—â–µ–Ω–∏–µ –±–æ—Ç—É**

4. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ª–æ–≥–∏ –∏ –æ—Ç–ø—Ä–∞–≤—å—Ç–µ –º–Ω–µ** - –ø–æ–∫–∞–∂–∏—Ç–µ —á—Ç–æ –≤–∏–¥–∏—Ç–µ!

–û—Å–æ–±–µ–Ω–Ω–æ –∏–Ω—Ç–µ—Ä–µ—Å–Ω—ã –ª–æ–≥–∏ –ø–æ—Å–ª–µ `[HANDLER] NEW MESSAGE EVENT TRIGGERED!`
